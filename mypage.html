<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>마이페이지 - Livee</title>

  <!-- 공통 스타일 & 마이페이지 전용 -->
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="css/mypage.css" />
  <!-- Remix Icon (아이콘 폰트) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" />
</head>
<body>
  <!-- 공통 UI: 상단 앱바 / 상단 탭 -->
  <header id="appbar"></header>
  <nav id="top-tabs"></nav>

  <!-- 마이페이지 본문 -->
  <main class="mypage container" role="main" aria-live="polite">
    <!-- 프로필 요약 -->
    <section class="profile">
      <div class="profile-card">
        <img src="img/default-profile.png" alt="프로필" />
        <div class="profile-info">
          <div class="name" id="mpName">사용자</div>
          <div class="role" id="mpRole">로그인 필요</div>
          <div class="profile-actions">
            <a class="btn outline" href="login.html">프로필/로그인</a>
          </div>
        </div>
      </div>
    </section>

    <!-- 공통 메뉴 -->
    <section class="mp-sections">
      <!-- 내가 등록한 공고 (브랜드 중심) -->
      <div class="mp-block">
        <div class="mp-block-head">
          <h3>내가 등록한 공고</h3>
          <a class="btn primary" href="recruit-new.html">공고 등록하기</a>
        </div>
        <ul class="mp-list">
          <li>
            <a href="recruit-list.html" class="mp-item" data-req="brand">
              <i class="ri-archive-drawer-line"></i>
              <div>
                <div class="title">등록한 공고 목록</div>
                <div class="meta">진행중/마감 구분</div>
              </div>
              <i class="ri-arrow-right-s-line arrow"></i>
            </a>
          </li>
          <li>
            <a href="#" class="mp-item" data-req="brand">
              <i class="ri-user-search-line"></i>
              <div>
                <div class="title">지원자 현황</div>
                <div class="meta">캠페인별 지원자/상태</div>
              </div>
              <i class="ri-arrow-right-s-line arrow"></i>
            </a>
          </li>
          <li>
            <a href="#" class="mp-item" data-req="brand">
              <i class="ri-rocket-line"></i>
              <div>
                <div class="title">제안하기</div>
                <div class="meta">쇼호스트에게 직접 제안</div>
              </div>
              <i class="ri-arrow-right-s-line arrow"></i>
            </a>
          </li>
        </ul>
      </div>

      <!-- 쇼호스트 전용 기능도 항상 노출 (역할 체크는 클릭 시) -->
      <div class="mp-block">
        <div class="mp-block-head">
          <h3>쇼호스트 메뉴</h3>
        </div>
        <ul class="mp-list">
          <li>
            <a href="myportfolio.html" class="mp-item" data-req="showhost">
              <i class="ri-id-card-line"></i>
              <div>
                <div class="title">내 포트폴리오</div>
                <div class="meta">프로필/경력/미디어 관리</div>
              </div>
              <i class="ri-arrow-right-s-line arrow"></i>
            </a>
          </li>
          <li>
            <a href="#" class="mp-item" data-req="showhost">
              <i class="ri-clipboard-line"></i>
              <div>
                <div class="title">내 지원 내역</div>
                <div class="meta">대기/합격/거절/정산</div>
              </div>
              <i class="ri-arrow-right-s-line arrow"></i>
            </a>
          </li>
          <li>
            <a href="#" class="mp-item" data-req="showhost">
              <i class="ri-mail-star-line"></i>
              <div>
                <div class="title">받은 제안</div>
                <div class="meta">브랜드가 보낸 제안</div>
              </div>
              <i class="ri-arrow-right-s-line arrow"></i>
            </a>
          </li>
          <li>
            <a href="#" class="mp-item" data-req="showhost">
              <i class="ri-heart-2-line"></i>
              <div>
                <div class="title">찜한 공고</div>
                <div class="meta">북마크한 공고 모아보기</div>
              </div>
              <i class="ri-arrow-right-s-line arrow"></i>
            </a>
          </li>
        </ul>
      </div>

      <!-- 공통/설정 -->
      <div class="mp-block">
        <div class="mp-block-head">
          <h3>설정</h3>
        </div>
        <ul class="mp-list">
          <li>
            <a href="#" class="mp-item">
              <i class="ri-settings-3-line"></i>
              <div>
                <div class="title">알림 설정</div>
                <div class="meta">푸시/이메일 수신 관리</div>
              </div>
              <i class="ri-arrow-right-s-line arrow"></i>
            </a>
          </li>
          <li>
            <a href="login.html" class="mp-item">
              <i class="ri-logout-box-r-line"></i>
              <div>
                <div class="title">로그아웃 / 로그인</div>
                <div class="meta">계정 전환 및 로그인</div>
              </div>
              <i class="ri-arrow-right-s-line arrow"></i>
            </a>
          </li>
        </ul>
      </div>
    </section>
  </main>

  <!-- 공통 UI: 하단 탭 -->
  <footer id="bottom-tabs"></footer>

  <!-- 공통 스크립트 -->
  <script src="js/config.js"></script>
  <script src="js/ui.js"></script>

  <!-- 역할 체크: 클릭 시 경고 -->
  <script>
    (function(){
      const name = localStorage.getItem('liveeName') || '사용자';
      const role = (localStorage.getItem('liveeRole') || '').toLowerCase(); // 'brand' | 'showhost' | ''
      const nameEl = document.getElementById('mpName');
      const roleEl = document.getElementById('mpRole');
      if (nameEl) nameEl.textContent = name;
      if (roleEl) roleEl.textContent = role ? (role === 'brand' ? '브랜드' : '쇼호스트') : '로그인 필요';

      // 역할 요구가 있는 항목 클릭 가드
      document.querySelectorAll('.mp-item[data-req]').forEach(a=>{
        a.addEventListener('click', (e)=>{
          const req = a.getAttribute('data-req'); // 'brand' or 'showhost'
          if (!role) {
            e.preventDefault();
            alert('로그인이 필요합니다.');
            location.href = 'login.html?prev=' + encodeURIComponent(location.pathname + location.search);
            return;
          }
          if (req && req !== role) {
            e.preventDefault();
            alert(req === 'showhost' ? '쇼호스트만 이용가능한 기능입니다.' : '브랜드만 이용가능한 기능입니다.');
          }
        });
      });
    })();
  </script>
</body>
</html>